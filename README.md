# Megalab News Backend

Проект – REST API для новостного портала, который необходим для сбора и выдачи информации и новостей. Это платформа, которая содержит в себе инструменты для взаимодействия с пользователями: публикация новостей, поиск публикаций, загрузка изображений, аутентификация по JWT (Access/Refresh token) и система комментариев.

## Ключевые возможности

- **Аутентификация и авторизация**: Безопасная регистрация и вход пользователей с использованием JWT (Access и Refresh токены).
- **Управление публикациями**: Полный CRUD функционал для новостных постов.
- **Управление комментариями**: Пользователи могут оставлять комментарии к публикациям.
- **Загрузка файлов**: Возможность загружать изображения для постов и аватаров пользователей.
- **Поиск и фильтрация**: Поиск публикаций по различным критериям, включая теги.
- **Кэширование**: Оптимизация производительности за счет кэширования часто запрашиваемых данных.

## Технологический стек

| Компонент             | Используемая технология         |
|-----------------------|---------------------------------|
| Язык программирования | Java 17                         |
| Фреймворк             | Spring Boot 3                   |
| База данных           | PostgreSQL                      |
| Миграции БД           | Liquibase                       |
| Доступ к данным       | Spring Data JPA                 |
| Безопасность          | Spring Security                 |
| Сборка проекта        | Maven                           |
| Документация API      | SpringDoc (OpenAPI 3.0), Swagger|
| Утилиты               | Lombok, MapStruct               |
| Контейнеризация       | Docker                          |

## Документация

После успешного запуска приложения, документация API (Swagger UI) будет доступна по следующему адресу:

[http://localhost:8080/swagger-ui](http://localhost:8080/swagger-ui)

## Локальный запуска проекта

### Требования

- JDK 17
- Maven
- Docker

### Шаги для запуска

1.  **Склонируйте репозиторий:**
    ```bash
    git clone https://github.com/slappidyslap/megalab-news
    cd megalab-news
    ```

2.  **Запустите базу данных PostgreSQL в Docker:**

    Для удобства в проекте есть скрипт `postgres-docker.sh`. Перед запуском установите переменную окружения `POSTGRES_PASSWORD`.

    ```bash
    export POSTGRES_PASSWORD=your_strong_password
    ./postgres-docker.sh
    ```
    Это запустит контейнер PostgreSQL на порту `5433`.

3.  **Запустите приложение:**

    Убедитесь, что переменная `POSTGRES_PASSWORD` все еще установлена в вашей терминальной сессии.

    ```bash
    ./mvnw spring-boot:run
    ```
    Приложение будет запущено на `http://localhost:8080`.

## Тестирование

Проект содержит как модульные, так и интеграционные тесты для проверки корректности работы сервисов и контроллеров.

Для запуска всех тестов выполните команду:
```bash
./mvnw test
```

## Деплой

В проекте присутствует скрипт `deploy-aws.sh`, который демонстрирует процесс развертывания на AWS EC2.

Скрипт выполняет следующие действия:
1.  Собирает проект в исполняемый `.jar` файл с помощью Maven.
2.  Копирует этот файл на удаленный сервер EC2 с помощью `scp`.
3.  Открывает SSH сессию для дальнейших действий на сервере (например, перезапуска сервиса).

Ранее проект был задеплоен так (в том числе Postges) и был доступен по адресу: http://54.178.81.72:8080
